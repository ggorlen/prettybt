<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pretty Binary Tree</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="main">
      <div>
        [<a href="https://www.github.com/ggorlen/prettybt">prettybt</a>]
        Enter binary tree as comma-delimited array with<br> `<code>null</code>` for absent
        nodes or <a id="random-tree" href="javascript:void(0);">make a random tree</a>:
      </div>
      <div>
        [<input id="entry">] &nbsp; 
        size: <input size=2 id="size" value="15"> &nbsp;
        night: <input id="night" type="checkbox">
      </div>
    </div>
    <canvas id="tree"></canvas>
    <script src="js/pbt.js"></script>
    <script>
 
(function () { 
  const clamp = (n, lo=7, hi=40) => Math.min(hi, Math.max(n, lo));
  const sizeElem = document.querySelector("#size");
  const entryElem = document.querySelector("#entry");
  const treeElem = document.querySelector("#tree");

  let root = PrettyBT.randomTree();
  entryElem.value = PrettyBT.arrayFromTree(root).toString();
  PrettyBT.drawBinaryTree(treeElem, root);
  
  document.querySelector("#random-tree").addEventListener("click", e => {
    root = PrettyBT.randomTree();
    entryElem.value = PrettyBT.arrayFromTree(root).toString();
    PrettyBT.drawBinaryTree(treeElem, root, clamp(+sizeElem.value));
  });

  entryElem.addEventListener("keyup", e => {
    e.target.style.width = Math.max(e.target.value.length, 20) + "ch";
    root = PrettyBT.treeFromString(e.target.value);
    PrettyBT.drawBinaryTree(treeElem, root, clamp(+sizeElem.value));
  });

  sizeElem.addEventListener("keyup", e => {
    e.target.style.width = Math.max(e.target.value.length, 2) + "ch";
    PrettyBT.drawBinaryTree(treeElem, root, clamp(+sizeElem.value));
  });

  document.querySelector("#night").addEventListener("click", () => {
    const night = document.querySelector("#night").checked;
    document.body.classList.toggle("night");

    PrettyBT.toggleNight(night);
    PrettyBT.drawBinaryTree(treeElem, root);
  });
})();

    </script>
  </body>
</html>
